<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç 3D Touch</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-area {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .touch-area {
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 0;
            user-select: none;
        }
        button {
            background: #f97316;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 0;
        }
        #log {
            background: #1f2937;
            color: #10b981;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üß™ –ß–∏—Å—Ç—ã–π —Ç–µ—Å—Ç 3D Touch</h1>
    
    <div class="test-area">
        <h3>–¢–µ—Å—Ç–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å (–Ω–∞–∂–º–∏—Ç–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ)</h3>
        <div class="touch-area" id="touchArea">
            –ù–∞–∂–º–∏ —Å—é–¥–∞
        </div>
        <p>–£—Å–ª–æ–≤–∏—è: —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ >500ms –±–µ–∑ –¥–≤–∏–∂–µ–Ω–∏—è</p>
    </div>

    <div class="test-area">
        <h3>–ö–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–∞</h3>
        <button id="testButton">üì± –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª (–¢–ï–°–¢)</button>
        <p>–≠—Ç–∞ –∫–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ–≥–¥–∞</p>
    </div>

    <div class="test-area">
        <h3>–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π</h3>
        <div id="log"></div>
        <button onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>

    <div id="modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(20px); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 20px; max-width: 400px; text-align: center;">
            <h2>üéâ –ú–û–î–ê–õ –†–ê–ë–û–¢–ê–ï–¢!</h2>
            <p>3D Touch –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∏!</p>
            <button onclick="closeModal()" style="margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        let touchStartTime = 0;
        let touchStartX = 0;
        let touchStartY = 0;

        function log(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.textContent += `[${time}] ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').textContent = '';
        }

        function openModal() {
            log('üéâ –ú–û–î–ê–õ –û–¢–ö–†–´–¢!');
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal() {
            log('‚ùå –ú–û–î–ê–õ –ó–ê–ö–†–´–¢');
            document.getElementById('modal').style.display = 'none';
        }

        // –¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞
        document.getElementById('testButton').addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            log('üì± –ö–ù–û–ü–ö–ê –ù–ê–ñ–ê–¢–ê!');
            openModal();
        });

        // 3D Touch –Ω–∞ –æ–±–ª–∞—Å—Ç–∏
        const touchArea = document.getElementById('touchArea');
        
        touchArea.addEventListener('touchstart', function(e) {
            touchStartTime = Date.now();
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            log('üëÜ Touch START');
        });

        touchArea.addEventListener('touchend', function(e) {
            const touchDuration = Date.now() - touchStartTime;
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            const touchDistanceX = Math.abs(touchEndX - touchStartX);
            const touchDistanceY = Math.abs(touchEndY - touchStartY);
            const totalDistance = Math.sqrt(touchDistanceX * touchDistanceX + touchDistanceY * touchDistanceY);

            log(`üìä Touch END: duration=${touchDuration}ms, distance=${totalDistance.toFixed(1)}px`);

            if (touchDuration > 500 && totalDistance < 30) {
                log('üéØ 3D Touch –ê–ö–¢–ò–í–ò–†–û–í–ê–ù!');
                openModal();
            } else {
                log('‚ùå 3D Touch –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª');
            }
        });

        // –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
        document.addEventListener('click', function(e) {
            if (e.target === document.body || e.target.closest('body')) {
                log('üö´ –ö–ª–∏–∫ –ø–æ body - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º');
                e.preventDefault();
                e.stopPropagation();
            }
        });

        log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é');
    </script>
</body>
</html>
